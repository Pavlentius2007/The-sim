# üê≥ CosmicLanding - Docker Compose
# –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

version: '3.8'

services:
  cosmiclanding:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cosmiclanding-app
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - PORT=3000
      # –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–¥–µ—Å—å
      # - JWT_SECRET=your-secret
      # - ENCRYPTION_KEY=your-key
      # - COOKIE_SECRET=your-cookie-secret
      # - CSRF_SECRET=your-csrf-secret
      # - ALLOWED_ORIGINS=https://yourdomain.com
    volumes:
      # –î–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - ./data:/app/data
    networks:
      - cosmiclanding-network

  # Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏ –∏ SSL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  nginx:
    image: nginx:alpine
    container_name: cosmiclanding-nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
    depends_on:
      - cosmiclanding
    networks:
      - cosmiclanding-network

networks:
  cosmiclanding-network:
    driver: bridge

volumes:
  data:
